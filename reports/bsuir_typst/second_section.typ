= Платформа программного обеспечения

== Структура и архитектура платформы


В качестве операционной системы для разработки и тестирования программного обеспечения была выбрана ОС #emph("Linux"). #emph("Linux") — это семейство #emph("Unix")-подобных операционных систем с открытым исходным кодом, основанных на одноименном ядре. Впервые выпущенное Линусом Торвальдсом в 1991 году, ядро #emph("Linux") стало основой для множества операционных систем, известных как дистрибутивы. 

Ключевыми особенностями #emph("Linux"), определившими его выбор, являются высокая стабильность, безопасность, гибкость настройки и модульность. Эти качества сделали его доминирующей системой в серверном сегменте, суперкомпьютерах и встраиваемых системах, а также популярной платформой для разработчиков программного 
обеспечения.

Архитектура #emph("Linux") строится на нескольких фундаментальных принципах, унаследованных от #emph("Unix"), но получивших собственное развитие:

+ #[Монолитное ядро с модульной структурой. Ядро #emph("Linux") является монолитным, то есть все основные сервисы работают в едином адресном пространстве (пространстве ядра), имея прямой доступ к аппаратному обеспечению. Однако оно поддерживает динамическую загрузку модулей (драйверов), что позволяет сохранять компактность, обеспечивая широкую поддержку оборудования.]

+ #[Системные библиотеки. Они формируют ключевой промежуточный слой между пользовательскими приложениями и ядром системы. Программы, как правило, не используют системные вызовы напрямую. Вместо этого они обращаются к функциям из системных библиотек, самой известной из которых является #emph("GNU C Library (glibc)"). Такой подход упрощает разработку и повышает переносимость программного обеспечения.]

+ #[Многозадачность и многопользовательский режим. Система изначально проектировалась для одновременной работы нескольких пользователей и параллельного выполнения множества процессов в пространстве пользователя. Ядро использует механизм вытесняющей многозадачности для справедливого распределения процессорного времени.]

+ #[Стандарт иерархии файловой системы (#emph("FHS")). Структура каталогов в #emph("Linux") строго стандартизирована. #emph("FHS") определяет назначение основных директорий, таких как /#emph("bin"), /#emph("etc"), /#emph("home") и /#emph("var"), что обеспечивает предсказуемость и совместимость программного обеспечения.]

+ #[Разделение пространства. Система четко разделена на пространство ядра (#emph("kernel space")) и пространство пользователя (#emph("user space")), где выполняются все прикладные программы. Взаимодействие между ними происходит через строго определенный интерфейс системных вызовов, что повышает стабильность и безопасность системы.
]

+ #[Широкая поддержка оборудования. Огромное количество драйверов для самого разного оборудования включено непосредственно в исходный код ядра #emph("Linux"). Это, в сочетании с модульной структурой, позволяющей подгружать только необходимые драйверы, обеспечивает широкую поддержку устройств «из коробки». Активное участие сообщества и производителей оборудования постоянно расширяет этот список.]

На рисунке @architectureLinux изображена архитектура операционной системы #emph("Linux").


#figure(
  image("img/fundamental-architecture-of-linux.jpg", width: 80%),
  caption: [Архитектура операционной системы Linux]
) <architectureLinux>

== История, версии и достоинства


Возникновение операционной системы #emph("Linux") датируется 1991 годом и связано с инициативой финского исследователя Линуса Торвальдса. Изначальной целью разработки было создание #emph("UNIX")-подобного ядра, которое было бы свободно от лицензионных ограничений, присущих существовавшим на тот момент системам, таким как #emph("MINIX"). Первая официальная версия ядра, 0.01, была представлена в сентябре 1991 года.

Фундаментальным этапом в развитии #emph("Linux") стала его интеграция с набором системных утилит и библиотек проекта #emph("GNU"), инициированного Ричардом Столлманом в 1983 году. Проект #emph("GNU") ставил своей целью создание полностью свободной #emph("UNIX")-совместимой операционной системы, и к началу 1990-х годов располагал практически всеми необходимыми компонентами (т.н. #emph("userland")), за исключением низкоуровневого ядра. Объединение ядра #emph("Linux") и пользовательского окружения #emph("GNU") привела к формированию полноценной операционной системы, которую корректно именовать #emph("GNU/Linux"). Перевод проекта под юрисдикцию лицензии #emph("GNU General Public License (GPL) v2") в 1992 году стал решающим фактором, обеспечившим правовую основу для свободного распространения, модификации и коллективной разработки.

Разработка #emph("Linux") в значительной степени была вдохновлена его предшественниками, в первую очередь #emph("UNIX") и #emph("MINIX"). Система #emph("UNIX"), созданная в лабораториях #emph("Bell Labs") в конце 1960-х — начале 1970-х годов, заложила фундаментальные принципы проектирования, ставшие стандартом для современных операционных систем: иерархическая файловая система, концепция процессов и функциональный интерфейс командной строки. Её портируемость и многозадачность сделали её стандартом в академической и коммерческой среде.

Однако со временем лицензирование #emph("UNIX") становилось всё более ограничительным. Это побудило Эндрю Таненбаума в конце 1980-х годов создать #emph("MINIX") — #emph("UNIX")-подобную операционную систему на основе микроядра, предназначенную для образовательных целей. Её исходный код был доступен, но лицензия всё ещё накладывала ограничения на свободное изменение и распространение. Именно опыт работы Линуса Торвальдса с #emph("MINIX") и его желание создать по-настоящему свободную #emph("UNIX")-подобную операционную систему с открытым исходным кодом, которую он мог бы адаптировать для собственного оборудования, и послужили прямой причиной для создания ядра #emph("Linux").

Ядро #emph("Linux") само по себе не является готовой к использованию операционной системой. Оно служит основой для дистрибутивов — комплексных программных сборок, которые включают также системные утилиты, библиотеки и прикладное программное обеспечение. Дистрибутивы, такие как #emph("Debian"), #emph("Fedora") и #emph("Ubuntu"), различаются системами управления пакетами, набором ПО и целевым назначением, предоставляя пользователям готовые к работе системы для различных задач.

Ключевые достоинства #emph("Linux") как платформы для разработки и научных 
вычислений включают следующие аспекты:

+ #[Доступность исходного кода: Лицензия #emph("GPL") гарантирует право на изучение, модификацию и распространение исходного кода. Это способствует проведению аудита безопасности, адаптации системы под специфические задачи и ускоряет цикл внедрения новых технологий.]

+ #[Высокая стабильность и надежность: Архитектурные принципы, унаследованные от #emph("UNIX"), обеспечивают высокую отказоустойчивость и способность к длительной непрерывной работе, что является критически важным для серверных систем и длительных вычислительных экспериментов.]

+ #[Модель безопасности: Система разграничения прав доступа для пользователей, групп и прочих субъектов, а также механизм изоляции процессов, значительно снижают риски, связанные с вредоносным программным обеспечением.]

+ #[Гибкость и модульность: Возможность детальной конфигурации всех компонентов системы, от параметров ядра до выбора графической среды, позволяет оптимизировать платформу для конкретных аппаратных ресурсов и прикладных задач.]

+ #[Эффективное управление ресурсами: Планировщик задач ядра #emph("Linux") и подсистема управления памятью обеспечивают эффективное использование вычислительных ресурсов, что часто выражается в более высокой производительности по сравнению с альтернативными ОС на идентичном оборудовании.]


== Обоснование выбора платформы

Для проведения исследования в качестве дистрибутива операционной системы #emph("GNU/Linux") был выбран #emph("Arch Linux"). Этот выбор обусловлен рядом ключевых преимуществ, которые делают его оптимальной платформой для проведения точного и воспроизводимого сравнительного анализа производительности.

Центральным принципом #emph("Arch Linux") является минимализм. Система поставляется в виде базового набора компонентов, предоставляя пользователю полный контроль над устанавливаемым программным обеспечением. Такой подход позволяет создать «чистую» среду для тестирования, свободную от фоновых процессов и служб, которые могли бы вносить помехи в результаты измерений. Это гарантирует, что полученные данные о времени выполнения алгоритма БПФ будут максимально точно отражать производительность самих процессоров, а не влияние стороннего ПО.

Другим важным достоинством является модель непрерывных обновлений (#emph("rolling release")). #emph("Arch Linux") предоставляет доступ к самым последним стабильным версиям программного обеспечения, включая ядро #emph("Linux"), компиляторы (#emph("GCC"), #emph("Clang")) и системные библиотеки. Использование новейшего ядра особенно актуально для данного исследования, поскольку оно включает последние оптимизации планировщика задач, что критически важно для корректной работы с гибридной архитектурой процессора #emph("Intel Core i5-12450H") и его технологией #emph("Thread Director"). Современные компиляторы, в свою очередь, могут предложить улучшенные возможности для оптимизации кода, что напрямую влияет на итоговую производительность.

Ключевым преимуществом #emph("Arch Linux") является его философия, предполагающая полный контроль над конфигурацией системы. Прозрачность и простота структуры дистрибутива позволяют точно документировать и, что более важно, воспроизводить тестовое окружение с высокой степенью достоверности. Это, в сочетании с минимализмом и доступом к новейшему программному обеспечению, обеспечивает создание изолированной и предсказуемой среды, необходимой для получения объективных и сопоставимых результатов производительности.


== Анализ операционной системы для написания программы

Анализ операционной системы в контексте поставленной задачи заключается в определении конкретных инструментов и методологий, которые будут использованы для разработки, компиляции и выполнения программы для тестирования. Выбранная платформа, #emph("Arch Linux"), предоставляет все необходимые средства для проведения глубокого и точного исследования.

Компиляция программы будет производиться с помощью компилятора #emph("GCC") последней версии, доступной в дистрибутиве. Для достижения максимальной производительности компиляция будет выполняться с флагами, активирующими высокий уровень оптимизации, такие как #emph("-O3") и #emph("-march=native"). Флаг #emph("-march=native") заставляет компилятор генерировать код, оптимизированный под специфический набор инструкций конкретного процессора, на котором производится сборка. Это позволит в полной мере задействовать архитектурные преимущества каждого из тестируемых #emph("CPU").

Ключевым аспектом анализа станет управление выполнением потоков. Операционная система #emph("Linux") предоставляет мощные механизмы для привязки процессов и потоков к конкретным физическим ядрам процессора (#emph("CPU affinity")). С помощью утилиты #emph("taskset") или системных вызовов, таких как #emph("sched_setaffinity"), можно будет изолированно измерять производительность:

+ #[Производительных (#emph("P-cores")) и энергоэффективных (#emph("E-cores")) ядер процессора #emph("Intel Core i5-12450H").]
+ #[Различного числа ядер (от 1 до 8) процессора #emph("AMD Ryzen 7 5800H").]

Такой подход позволит детально изучить вклад каждого типа ядер в общую производительность и оценить эффективность планировщика задач.

Для получения более глубоких данных о производительности, помимо простого измерения времени выполнения, планируется использование утилиты #emph("perf"). Этот инструмент позволяет собирать данные с аппаратных счетчиков производительности процессора, такие как количество выполненных инструкций, промахи кэша и неверно предсказанные переходы. Анализ этих метрик даст возможность сделать более обоснованные выводы о причинах наблюдаемых различий в производительности.

Таким образом, #emph("Arch Linux") предоставляет полный набор инструментов для разработки, низкоуровневой оптимизации и детального анализа производительности, что делает его идеальной средой для решения задач данного исследования.
