= Архитектура вычислительной системы 

== Структура и архитектура вычислительной системы

Процессоры #emph("AMD Ryzen 7 5800H") и #emph("Intel Core i5-12450H") основаны на принципиально разных архитектурных подходах к построению вычислительных систем и ориентированы мобильные вычислительные системы.

#figure(
  caption:[Сравнение характеристик],
  table(
    columns:(36%, 32%, 32%),
    rows: auto,
    align: center,
    [Характеристики], [#emph("AMD Ryzen 7 5800H")], [#emph("Intel Core i5-12450H")],

[Кодовое имя архитектуры], [#emph("Cezanne-H (Zen 3)")], [#emph("Alder Lake-H")], 

[Физические ядра], [8], [8], 

[Количество потоков], [16], [12],

[#emph("L1") кэш на ядро], [64 КБ], [80 КБ + 96 КБ],

[#emph("L2") кэш на ядро], [512 КБ], [1.25 МБ + 2 МБ#footnote[E-ядра используют общий 2 МБ кластер]],

[#emph("L3") кэш], [16 МБ], [12 МБ],

[Тактовая частота], [3.2 - 4.4 Ггц], [2 - 4.4 Ггц],

[Техпроцесс], [7 нм], [10 нм],

[Встроенная графика], [#emph("AMD Radeon RX Vega 8")], [#emph("Intel UHD Graphics Xe G4")],

[Поддерживаемая память], [#emph("DDR4")], [#emph("DDR4, DDR5")],

[#emph("TDP")], [45 Вт], [45 Вт],

[#emph("Hyper-Threading/SMT")], [+], [+],

 ),
)

Процессор #emph("AMD Ryzen 7 5800H"), использует монолитную архитектуру #emph("Zen 3"), произведенную по техпроцессу 7 нм @specsRyzen.  Данная архитектура предполагает использование 8 ядер, которые с помощью технологии #emph("SMT") (#emph("Simultaneous Multithreading")) обеспечивают обработку 16 потоков. Максимальная тактовая частота составляет 4.4 ГГц. Процессор оснащен 16 МБ кэш-памяти третьего уровня (#emph("L3")), а его тепловой пакет (#emph("TDP")) составляет 45 Вт. За обработку графики отвечает встроенный видеоадаптер #emph("AMD Radeon RX Vega 8"). Он построен на проверенной временем архитектуре #emph("Vega"), имеет в своем составе 8 вычислительных блоков и способен работать на частоте до 2.0 ГГц.

Процессор #emph("Intel Core i5-12450H") базируется на гибридной архитектуре #emph("Alder Lake"), изготовленной по техпроцессу 10 нм @specsIntel. В его состав входят 4 производительных #emph("P")-ядра и 4 энергоэффективных #emph("E")-ядра, что обеспечивает поддержку 12 потоков. Распределение нагрузки между ядрами осуществляется аппаратным планировщиком #emph("Intel Thread Director"). Пиковая частота производительных ядер достигает 4.4 ГГц, объем кэш-памяти #emph("L3") составляет 12 МБ, а тепловой пакет (#emph("TDP")) — 45 Вт. В него интегрировано графическое ядро #emph("Intel UHD Graphics Xe G4"),  принадлежащее к более современной архитектуре #emph("Xe-LP"). Оно включает 48 исполнительных блоков, но работает на более низкой пиковой частоте в 1.2 ГГц.

Диаграммы топологии, полученные с помощью утилиты #emph("lstopo"), наглядно демонстрируют различие в архитектуре исследуемых процессоров. На рисунке @amdTopology видна однородная структура #emph("AMD Ryzen 7 5800H") с восемью идентичными ядрами.

#figure(
  image("img/amd_topology.png", width: 80%),
  caption: [Топология #emph("AMD Ryzen 7 5800H")]
) <amdTopology>

На рисунке @intelTopology представлена гибридная архитектура #emph("Intel Core i5-12450H") с разделением на производительные и энергоэффективные ядра. Четыре производительных #emph("P")-ядра обладают индивидуальными кэшами #emph("L2") размером 1.25 МБ каждое, в то время как четыре энергоэффективных #emph("E")-ядра используют общий кластер кэш-памяти #emph("L2") размером 2 МБ.

#figure(
  image("img/intel_topology.png", width: 80%),
  caption: [Топология #emph("Intel Core i5-12450H")]
) <intelTopology>

Таким образом, ключевое различие между процессорами заключается в подходе к многоядерности. Архитектура #emph("Zen 3"), позволяющая процессору оперировать 16 потоками, потенциально лучше подходит для тяжелых параллельных вычислений, где важна максимальная производительность каждого потока, а увеличенный объем кэш-памяти #emph("L3") способствует ускорению работы с большими наборами данных. В свою очередь, архитектура #emph("Alder Lake") использует более современную модель с разнородными ядрами, которая обеспечивает гибкость и энергоэффективность за счет распределения задач между производительными и эффективными ядрами с помощью аппаратного планировщика #emph("Intel Thread Director"). Однако эффективность такого подхода сильно зависит от оптимизации операционной системы и программного обеспечения под гибридную архитектуру. Эти фундаментальные различия в дизайне и станут основой для последующего сравнительного анализа их производительности в реальных задачах.


== История, версии и достоинства


Архитектура #emph("Zen 3"), на которой базируется #emph("Ryzen 7 5800H"), является кульминацией многолетних усовершенствований. Её история начинается с революционной архитектуры #emph("Zen") (2017), которая ознаменовала возвращение #emph("AMD") в сегмент высокопроизводительных процессоров. Последующая #emph("Zen 2") привнесла 7-нм техпроцесс и чиплетный дизайн, значительно увеличив количество ядер. #emph("Zen 3") стала её логическим развитием, сфокусированным на повышении показателя #emph("IPC") (числа инструкций за такт) и снижении задержек. Ключевым нововведением стало объединение ядер и кэш-памяти #emph("L3") в единый комплекс, что улучшило межъядерное взаимодействие. Основные достоинства этой архитектуры заключаются в её монолитной структуре с восемью одинаково производительными ядрами, что обеспечивает предсказуемую производительность. Благодаря технологии #emph("SMT") процессор обрабатывает 16 потоков, что делает его отлично подходящим для параллельных вычислений, а большой объединенный #emph("L3") кэш ускоряет работу с крупными наборами данных.

В свою очередь, архитектура #emph("Alder Lake"), лежащая в основе #emph("Core i5-12450H"), знаменует собой самый радикальный сдвиг для #emph("Intel") за последнее десятилетие. Ей предшествовал долгий период доминирования архитектуры #emph("Skylake") и её многочисленных итераций (от #emph("Kaby Lake") до #emph("Comet Lake")), производившихся по 14-нм техпроцессу. Столкнувшись с растущей конкуренцией, #emph("Intel") разработала #emph("Alder Lake") как комплексный ответ. Эта архитектура не только перешла на новый техпроцесс #emph("Intel 7") (10 нм), но и впервые в настольном сегменте представила гибридную модель. Она сочетает в себе производительные ядра (#emph("P-cores")) для выполнения сложных задач и энергоэффективные ядра (#emph("E-cores")) для фоновых процессов. Управление распределением задач между ними осуществляет аппаратный планировщик #emph("Intel Thread Director"). Преимущества такого подхода заключаются в гибкости и энергоэффективности, поскольку система адаптируется к нагрузке, оптимизируя энергопотребление. #emph("P")-ядра обеспечивают высокую однопоточную производительность, а поддержка современных технологий, таких как память #emph("DDR5"), гарантирует высокую пропускную способность.

== Обоснование выбора вычислительной системы

Выбор процессоров #emph("AMD Ryzen 7 5800H") и #emph("Intel Core i5-12450H") для сравнительного анализа обусловлен тем, что они, принадлежа к одному классу мобильных решений с одинаковым тепловым пакетом, основываются на принципиально разных архитектурных философиях. Их сопоставление позволяет наглядно оценить сильные и слабые стороны двух доминирующих подходов в современном процессоростроении: «классического» монолитного с однородными ядрами и нового гибридного с разнородными. Ключевым аспектом для сравнения является реализация технологий виртуальной многопоточности: #emph("SMT") (#emph("Simultaneous Multithreading")) у #emph("AMD") и #emph("Hyper-Threading") у #emph("Intel"). В процессоре #emph("Ryzen 7 5800H") технология #emph("SMT") применяется ко всем восьми однородным ядрам, удваивая количество потоков до 16. Это создает симметричную и предсказуемую среду для параллельных вычислений. В свою очередь, в #emph("Intel Core i5-12450H") технология #emph("Hyper-Threading") активна только на четырех производительных #emph("P")-ядрах, в то время как четыре энергоэффективных #emph("E")-ядра не поддерживают ее. В результате общее число потоков составляет 12 (8 от #emph("P")-ядер и 4 от #emph("E")-ядер), что создает асимметричную структуру. Именно анализ того, как операционная система и приложение для тестов будут распределять нагрузку в этих двух принципиально разных моделях многопоточности, и является одной из центральных задач исследования. Наконец, принадлежность процессоров к одному сегменту и схожий уровень энергопотребления создают равные условия для анализа именно архитектурных различий, что делает сравнение объективным.

Выбор данных моделей также обусловлен их широкой распространенностью на рынке, что делает исследование актуальным для многих пользователей. В качестве тестовой нагрузки было выбрано быстрое преобразование Фурье (БПФ) — фундаментальный алгоритм, чувствительный к производительности ядер и подсистемы памяти. Его параллельная природа позволяет эффективно оценить, как каждая архитектура справляется с масштабированием вычислительной нагрузки.


== Анализ выбранной вычислительной системы для написания программы


Анализ производительности выбранных процессоров целесообразно начать с рассмотрения их типичных результатов в популярных синтетических бенчмарках, таких как #emph("Cinebench R24"), #emph("Geekbench 5") и #emph("Geekbench 6"). Эти тесты являются индустриальным стандартом для оценки производительности #emph("CPU") и позволяют сделать предварительные выводы о поведении процессоров в различных сценариях.

#emph("Cinebench R24") — это бенчмарк, который оценивает производительность процессора путем рендеринга сложной трехмерной сцены @CinebenchInfo. Тест доступен в двух режимах: однопоточном, который измеряет производительность одного ядра, и многопоточном, который задействует все доступные процессорные потоки. Этот бенчмарк хорошо показывает пиковую производительность #emph("CPU") в задачах, которые эффективно распараллеливаются.

#emph("Geekbench 6") — это кросс-платформенный бенчмарк, который измеряет производительность системы в задачах, имитирующих реальные сценарии использования, от просмотра веб-страниц до обработки изображений и машинного обучения @GeekbenchInfo. Он также предоставляет результаты для однопоточного и многопоточного режимов, что позволяет составить комплексное представление о возможностях процессора.

Сравнивая результаты тестирования, можно отметить, что в многопоточном тесте #emph("Cinebench R24") процессор #emph("AMD Ryzen 7 5800H") опережает #emph("Intel Core i5-12450H") примерно на 20%, что показывает его эффективность при работе в многопотоке, в то время как в однопоточном режиме разница составляет 10% в пользу #emph("Intel Core i5-12450H"), что подчеркивает его высокую производительность при выполнении задач с использованием одного ядра. 

Тест #emph("Geekbench 6") показывает довольно схожие результаты. В многопоточном тесте #emph("Ryzen 7 5800H") вырывается вперед на 16%, оставляя позади #emph("Core i5-12450H"). Но в однопоточном режиме по прежнему лидирует #emph("Core i5-12450H") с отрывом в 12.5%, что доказывает его преимущество в задачах, не требующих использования нескольких ядер.

Экстраполируя эти результаты на задачу вычисления БПФ, следует ожидать аналогичной картины. В однопоточном режиме #emph("Intel Core i5-12450H"), вероятнее всего, покажет лучшее время. В многопоточном же режиме, где алгоритм может быть эффективно распараллелен, преимущество будет за #emph("AMD Ryzen 7 5800H") благодаря его превосходству в многопоточных вычислениях.
